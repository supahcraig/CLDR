{"flowContents":{"identifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"1-2 autoscaling","comments":"","position":{"x":0.0,"y":0.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"7500f972-64cf-3f45-afd7-108ce7d68848","name":"Generate CPU load","comments":"","position":{"x":749.5,"y":442.5},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.14.0.2.3.0.0-91"},"style":{},"type":"org.apache.nifi.processors.standard.CompressContent","properties":{"Compression Format":"gzip","Mode":"compress","Compression Level":"9","Update Filename":"false"},"propertyDescriptors":{"Compression Format":{"name":"Compression Format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false},"Mode":{"name":"Mode","displayName":"Mode","identifiesControllerService":false,"sensitive":false},"Compression Level":{"name":"Compression Level","displayName":"Compression Level","identifiesControllerService":false,"sensitive":false},"Update Filename":{"name":"Update Filename","displayName":"Update Filename","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":9,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"},{"identifier":"9e31ab04-abb9-382d-ab6b-ed9a08891f5e","name":"Send Data","comments":"","position":{"x":736.0,"y":832.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.14.0.2.3.0.0-91"},"style":{},"type":"org.apache.nifi.processors.standard.PutFile","properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/tmp","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"},{"identifier":"a0121a66-cab6-3bc1-8eac-e8fe6e45a103","name":"Trigger cycle every few minutes","comments":"","position":{"x":765.5,"y":154.5},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.14.0.2.3.0.0-91"},"style":{},"type":"org.apache.nifi.processors.standard.GenerateFlowFile","properties":{"character-set":"UTF-8","File Size":"10mb","mime-type":null,"generate-ff-custom-text":null,"Batch Size":"100","Unique FlowFiles":"false","Data Format":"Text"},"propertyDescriptors":{"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false},"File Size":{"name":"File Size","displayName":"File Size","identifiesControllerService":false,"sensitive":false},"mime-type":{"name":"mime-type","displayName":"Mime Type","identifiesControllerService":false,"sensitive":false},"generate-ff-custom-text":{"name":"generate-ff-custom-text","displayName":"Custom Text","identifiesControllerService":false,"sensitive":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false},"Unique FlowFiles":{"name":"Unique FlowFiles","displayName":"Unique FlowFiles","identifiesControllerService":false,"sensitive":false},"Data Format":{"name":"Data Format","displayName":"Data Format","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"14 min","schedulingStrategy":"TIMER_DRIVEN","executionNode":"PRIMARY","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"},{"identifier":"53b3a262-cab7-3f7d-a50d-f87c23b6f56f","name":"Receive data","comments":"","position":{"x":1504.0,"y":832.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.14.0.2.3.0.0-91"},"style":{},"type":"org.apache.nifi.processors.standard.FetchFile","properties":{"Move Conflict Strategy":"Rename","Log level when file not found":"NONE","Move Destination Directory":null,"Log level when permission denied":"NONE","File to Fetch":"/tmp/keepoverwriting","Completion Strategy":"None"},"propertyDescriptors":{"Move Conflict Strategy":{"name":"Move Conflict Strategy","displayName":"Move Conflict Strategy","identifiesControllerService":false,"sensitive":false},"Log level when file not found":{"name":"Log level when file not found","displayName":"Log level when file not found","identifiesControllerService":false,"sensitive":false},"Move Destination Directory":{"name":"Move Destination Directory","displayName":"Move Destination Directory","identifiesControllerService":false,"sensitive":false},"Log level when permission denied":{"name":"Log level when permission denied","displayName":"Log level when permission denied","identifiesControllerService":false,"sensitive":false},"File to Fetch":{"name":"File to Fetch","displayName":"File to Fetch","identifiesControllerService":false,"sensitive":false},"Completion Strategy":{"name":"Completion Strategy","displayName":"Completion Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure","permission.denied","not.found"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"},{"identifier":"d4e6964e-5b9b-3313-98a8-9ea2928bf697","name":"Define filename for data","comments":"","position":{"x":728.0,"y":640.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.14.0.2.3.0.0-91"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"Delete Attributes Expression":null,"filename":"keepoverwriting","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"88494dc0-1757-3f06-90ec-6551f358dc92","name":"Trigger","source":{"id":"a0121a66-cab6-3bc1-8eac-e8fe6e45a103","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Trigger cycle every few minutes","comments":""},"destination":{"id":"7500f972-64cf-3f45-afd7-108ce7d68848","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Generate CPU load","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":100000,"backPressureDataSizeThreshold":"100 GB","flowFileExpiration":"4 min","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"},{"identifier":"22593bd6-d6d2-372e-a34b-48ffc327a9c6","name":"Load generated","source":{"id":"7500f972-64cf-3f45-afd7-108ce7d68848","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Generate CPU load","comments":""},"destination":{"id":"d4e6964e-5b9b-3313-98a8-9ea2928bf697","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Define filename for data","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"},{"identifier":"c429961c-f655-33bf-9b7b-4defebda9f81","name":"To send","source":{"id":"d4e6964e-5b9b-3313-98a8-9ea2928bf697","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Define filename for data","comments":""},"destination":{"id":"9e31ab04-abb9-382d-ab6b-ed9a08891f5e","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Send Data","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"},{"identifier":"1fce04c7-e10f-39d7-ae6d-922dcb8a9387","name":"To receive","source":{"id":"9e31ab04-abb9-382d-ab6b-ed9a08891f5e","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Send Data","comments":""},"destination":{"id":"53b3a262-cab7-3f7d-a50d-f87c23b6f56f","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Receive data","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure","success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"},{"identifier":"58733e91-d1f2-3da2-bccc-5055a489d63b","name":"Repeat","source":{"id":"7500f972-64cf-3f45-afd7-108ce7d68848","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Generate CPU load","comments":""},"destination":{"id":"7500f972-64cf-3f45-afd7-108ce7d68848","type":"PROCESSOR","groupId":"0525215a-847c-383c-8f51-dc1f8dcd8a55","name":"Generate CPU load","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"4 min","prioritizers":[],"bends":[{"x":1218.5,"y":481.5},{"x":1218.5,"y":531.5}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"}],"labels":[{"identifier":"e3b73b17-4285-3133-9876-96c38d320011","position":{"x":224.0,"y":168.0},"label":"Autoscaling flow between 1 and 2 nodes \nDennis Jaheruddin\n \n\nTested with nodesize Extra Small and autoscaling enabled with a range of 1-2 \n\n \nWithin 3 minutes the flow autoscales up from 1 to 2\n3 minutes later all flowfiles expire\nAbout 3 minutes later it scales down from 2 to 1\n\nOn minute 14 we generate new load and the cycle starts again.\n\n \n\nNote that there is no data flowing in or out, so watch the CPU metrics to see the effect.","width":488.0,"height":192.0,"style":{"font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0525215a-847c-383c-8f51-dc1f8dcd8a55"}],"funnels":[],"controllerServices":[],"variables":{},"defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP"},"externalControllerServices":{},"parameterContexts":{},"flowEncodingVersion":"1.0"}